<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib.html">otplib</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-authenticator.html">otplib-authenticator</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-authenticator_Authenticator.html">otplib-authenticator/Authenticator</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-authenticator_check.html">otplib-authenticator/check</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-authenticator_checkDelta.html">otplib-authenticator/checkDelta</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-authenticator_decodeKey.html">otplib-authenticator/decodeKey</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-authenticator_encodeKey.html">otplib-authenticator/encodeKey</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-authenticator_keyuri.html">otplib-authenticator/keyuri</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-authenticator_token.html">otplib-authenticator/token</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-browser.html">otplib-browser</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-browser_crypto.html">otplib-browser/crypto</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-browser_randomBytes.html">otplib-browser/randomBytes</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-core.html">otplib-core</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-core_hotpCheck.html">otplib-core/hotpCheck</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-core_hotpCounter.html">otplib-core/hotpCounter</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-core_hotpDigest.html">otplib-core/hotpDigest</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-core_hotpOptions.html">otplib-core/hotpOptions</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-core_hotpSecret.html">otplib-core/hotpSecret</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-core_hotpToken.html">otplib-core/hotpToken</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-core_totpCheck.html">otplib-core/totpCheck</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-core_totpCheckWithWindow.html">otplib-core/totpCheckWithWindow</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-core_totpCounter.html">otplib-core/totpCounter</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-core_totpOptions.html">otplib-core/totpOptions</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-core_totpSecret.html">otplib-core/totpSecret</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-core_totpTimeRemaining.html">otplib-core/totpTimeRemaining</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-core_totpTimeUsed.html">otplib-core/totpTimeUsed</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-core_totpToken.html">otplib-core/totpToken</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-hotp.html">otplib-hotp</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-hotp_HOTP.html">otplib-hotp/HOTP</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-totp.html">otplib-totp</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-totp_TOTP.html">otplib-totp/TOTP</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-utils.html">otplib-utils</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-utils_hexToInt.html">otplib-utils/hexToInt</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-utils_intToHex.html">otplib-utils/intToHex</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-utils_isSameToken.html">otplib-utils/isSameToken</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-utils_leftPad.html">otplib-utils/leftPad</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-utils_padSecret.html">otplib-utils/padSecret</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-utils_removeSpaces.html">otplib-utils/removeSpaces</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-utils_secretKey.html">otplib-utils/secretKey</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-utils_setsOf.html">otplib-utils/setsOf</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-otplib-utils_stringToHex.html">otplib-utils/stringToHex</a></span></li>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>otplib</h1><blockquote>
<p>Time-based (TOTP) and HMAC-based (HOTP) One-Time Password library</p>
</blockquote>
<p><a href="https://www.npmjs.com/package/otplib"><img src="https://img.shields.io/npm/v/otplib.svg?style=flat-square" alt="npm"></a>
<a href="https://circleci.com/gh/yeojz/otplib"><img src="https://img.shields.io/circleci/project/github/yeojz/otplib/master.svg?style=flat-square" alt="Build Status"></a>
<a href="https://coveralls.io/github/yeojz/otplib"><img src="https://img.shields.io/coveralls/yeojz/otplib/master.svg?style=flat-square" alt="Coverage Status"></a>
<a href="https://www.npmjs.com/package/otplib"><img src="https://img.shields.io/npm/dt/otplib.svg?style=flat-square" alt="npm downloads"></a>
<a href="https://github.com/yeojz/otplib/tree/master/packages/types-ts"><img src="https://img.shields.io/badge/typedef-.d.ts-blue.svg?style=flat-square&amp;longCache=true" alt="TypeScript Support"></a></p>
<hr>
<!-- TOC depthFrom:2 -->
<ul>
<li><a href="#about">About</a></li>
<li><a href="#demo-and-documentation">Demo and Documentation</a></li>
<li><a href="#installation">Installation</a><ul>
<li><a href="#type-definitions">Type Definitions</a></li>
</ul>
</li>
<li><a href="#upgrading">Upgrading</a></li>
<li><a href="#getting-started">Getting Started</a><ul>
<li><a href="#in-node">In node</a><ul>
<li><a href="#using-specific-otp-implementations">Using specific OTP implementations</a></li>
<li><a href="#using-classes">Using classes</a></li>
<li><a href="#using-with-expoio">Using with Expo.io</a></li>
</ul>
</li>
<li><a href="#in-browser">In browser</a><ul>
<li><a href="#browser-compatibility">Browser Compatibility</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#advanced-usage">Advanced Usage</a><ul>
<li><a href="#core">Core</a></li>
<li><a href="#other-bundles">Other Bundles</a></li>
</ul>
</li>
<li><a href="#notes">Notes</a><ul>
<li><a href="#setting-custom-options">Setting Custom Options</a><ul>
<li><a href="#available-options">Available Options</a></li>
</ul>
</li>
<li><a href="#seed--secret-length">Seed / secret length</a></li>
<li><a href="#google-authenticator">Google Authenticator</a><ul>
<li><a href="#difference-between-authenticator-and-totp">Difference between Authenticator and TOTP</a></li>
<li><a href="#base32-keys-and-rfc3548">Base32 Keys and RFC3548</a></li>
<li><a href="#displaying-a-qr-code">Displaying a QR code</a></li>
</ul>
</li>
<li><a href="#getting-time-remaining--time-used">Getting Time Remaining / Time Used</a></li>
<li><a href="#exploring-with-local-repl">Exploring with local-repl</a></li>
</ul>
</li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#license">License</a></li>
</ul>
<!-- /TOC -->
<h2>About</h2><p><code>otplib</code> is a JavaScript One Time Password (OTP) library.
It provides both functional and class based interfaces for
dealing with OTP generation and verification.</p>
<p>It implements both <a href="http://en.wikipedia.org/wiki/HMAC-based_One-time_Password_Algorithm">HOTP</a> - <a href="http://tools.ietf.org/html/rfc4226">RFC 4226</a>
and <a href="http://en.wikipedia.org/wiki/Time-based_One-time_Password_Algorithm">TOTP</a> - <a href="http://tools.ietf.org/html/rfc6238">RFC 6238</a>,
and are tested against the test vectors provided in their respective RFC specifications.
These datasets can be found in the <code>packages/tests</code> folder.</p>
<ul>
<li><a href="https://github.com/yeojz/otplib/blob/master/packages/tests/rfc4226.js">RFC 4226 Dataset</a></li>
<li><a href="https://github.com/yeojz/otplib/blob/master/packages/tests/rfc6238.js">RFC 6238 Dataset</a></li>
</ul>
<p>This library is also compatible with <a href="https://github.com/google/google-authenticator">Google Authenticator</a>,
and includes additional methods to allow you to work with Google Authenticator.</p>
<h2>Demo and Documentation</h2><ul>
<li><a href="https://yeojz.github.io/otplib/docs">Documentation</a></li>
<li><a href="https://yeojz.github.io/otplib">Demo</a></li>
<li><a href="https://github.com/yeojz/otplib/wiki/FAQ">FAQ / Common Issues</a></li>
<li><a href="https://github.com/yeojz/otplib/blob/master/packages/types-ts/index.d.ts">List of available methods</a> (documented via TypeScript)</li>
<li><a href="https://github.com/yeojz/otplib/tree/master/examples">Examples</a></li>
</ul>
<h2>Installation</h2><p>Install the library via:</p>
<pre class="prettyprint source lang-bash"><code>$ npm install otplib --save

# To install the Release Candidates:
$ npm install otplib@next --save

# Additional dependencies for TypeScript
$ npm install @types/node</code></pre><table>
<thead>
<tr>
<th style="text-align:left">Release Type</th>
<th style="text-align:left">Version</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Current / Stable</td>
<td style="text-align:left"><a href="https://www.npmjs.com/package/otplib"><img src="https://img.shields.io/npm/v/otplib.svg?style=flat-square" alt="npm"></a></td>
</tr>
<tr>
<td style="text-align:left">Release Candidate</td>
<td style="text-align:left"><a href="https://www.npmjs.com/package/otplib"><img src="https://img.shields.io/npm/v/otplib/next.svg?style=flat-square" alt="npm"></a></td>
</tr>
</tbody>
</table>
<h3>Type Definitions</h3><p><code>TypeScript</code> support was introduced in <code>v10.0.0</code></p>
<h2>Upgrading</h2><p>This library follows <code>semver</code>. As such, major version bumps usually mean API changes or behavior changes.
Please check <a href="https://github.com/yeojz/otplib/wiki/upgrade-notes">upgrade notes</a> for more information,
especially before making any major upgrades.</p>
<p>You might also want to check out the release notes associated with each tagged versions
in the <a href="https://github.com/yeojz/otplib/releases">releases</a> page.</p>
<h2>Getting Started</h2><h3>In node</h3><pre class="prettyprint source lang-js"><code>import otplib from 'otplib';

const secret = 'KVKFKRCPNZQUYMLXOVYDSQKJKZDTSRLD'
// Alternatively: const secret = otplib.authenticator.generateSecret();

const token = otplib.authenticator.generate(secret);

const isValid = otplib.authenticator.check(token, secret);
// or
const isValid = otplib.authenticator.verify({ token, secret })</code></pre><h4>Using specific OTP implementations</h4><p>If you want to include a specific OTP specification, you can import it directly:</p>
<pre class="prettyprint source lang-js"><code>import hotp from 'otplib/hotp';
import totp from 'otplib/totp';
import authenticator from 'otplib/authenticator';</code></pre><p><strong>Important</strong>: If you import the libraries directly, you will have to provide a crypto
solution (this is to allow custom crypto solutions), as long as they implement <code>createHmac</code> and <code>randomBytes</code>.
Take a look at the <a href="https://github.com/yeojz/otplib/blob/master/packages/otplib-browser">browser implementation</a>
of this package as an example.</p>
<p>For <strong>example</strong>:</p>
<pre class="prettyprint source lang-js"><code>import authenticator from 'otplib/authenticator';
import crypto from 'crypto';

authenticator.options = { crypto };

// Or if you're using the other OTP methods
// hotp.options = { crypto }
// totp.options = { crypto }

const secret = 'KVKFKRCPNZQUYMLXOVYDSQKJKZDTSRLD'
const token = authenticator.generate(secret); // 556443</code></pre><h4>Using classes</h4><p>For ease of use, the default exports are all instantiated instances of their respective classes.
You can access the original classes via it's same name property of the instantiated class.</p>
<p>i.e</p>
<pre class="prettyprint source lang-js"><code>import hotp from 'otplib/hotp';
const HOTP = hotp.HOTP;
// const inst = new HOTP();

import totp from 'otplib/totp';
const TOTP = totp.TOTP;
// const inst = new TOTP();

import authenticator from 'otplib/authenticator';
const Authenticator = authenticator.Authenticator;
// const inst = new Authenticator();

// Alternatively, you can get it from the default module as well
import otplib from 'otplib';
const HOTP = otplib.hotp.HOTP
const TOTP = otplib.totp.TOTP
const Authenticator = otplib.authenticator.Authenticator</code></pre><h4>Using with Expo.io</h4><p><a href="https://expo.io">Expo</a> does not contain a <code>randomBytes</code> implementation
within the platform-provided crypto. As such, you should avoid
using <code>otplib.authenticator.generateSecret();</code> and generate your own secrets instead.</p>
<h3>In browser</h3><p>A browser-targeted version has been compiled.
You'll need to add the following scripts to your code:</p>
<pre class="prettyprint source lang-html"><code>&lt;script src=&quot;otplib-browser.js&quot;>&lt;/script>

&lt;script type=&quot;text/javascript&quot;>
   // window.otplib
&lt;/script></code></pre><p>You can find it in <code>node_modules/otplib</code> after you install.</p>
<p>Alternatively you can</p>
<ul>
<li>Download from <a href="https://github.com/yeojz/otplib/tree/gh-pages/lib">gh-pages</a>.</li>
<li>Use unpkg.com</li>
</ul>
<pre class="prettyprint source lang-html"><code>&lt;script src=&quot;https://unpkg.com/otplib@^10.0.0/otplib-browser.js&quot;>&lt;/script></code></pre><p>For a live example, the <a href="https://yeojz.github.io/otplib">project site</a> has been built using <code>otplib-browser.js</code>.
The source code can be found <a href="https://github.com/yeojz/otplib/tree/master/site">here</a>.</p>
<h4>Browser Compatibility</h4><p>In order to reduce the size of the browser package, the <code>crypto</code> package has been replaced with
an alternative implementation. The current implementation depends on <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array">Uint8Array</a>
and the browser's native <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/crypto">crypto</a> methods, which may only be available in
recent browser versions.</p>
<p>To find out more about the replacements, you can take a look at <code>packages/otplib-browser/crypto.js</code></p>
<p>The approximate <strong>output sizes</strong> are as follows:</p>
<ul>
<li>with node crypto: ~311Kb</li>
<li>with alternative crypto: ~106Kb</li>
</ul>
<h2>Advanced Usage</h2><p>Ihis library been split and classified into 6 core files with other specific
environment based bundles provided.</p>
<h3>Core</h3><table>
<thead>
<tr>
<th>file</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://yeojz.github.io/otplib/docs/module-otplib-authenticator.html">authenticator.js</a></td>
<td>Google Authenticator bindings</td>
</tr>
<tr>
<td><a href="https://yeojz.github.io/otplib/docs/module-otplib-core.html">core.js</a></td>
<td>Functions for various steps in the OTP generation process</td>
</tr>
<tr>
<td><a href="https://yeojz.github.io/otplib/docs/module-otplib-hotp.html">hotp.js</a></td>
<td>Wraps core functions into an instantiated HOTP class</td>
</tr>
<tr>
<td><a href="https://yeojz.github.io/otplib/docs/module-otplib.html">otplib.js</a></td>
<td>Library entry file, containing all instances with crypto set up</td>
</tr>
<tr>
<td><a href="https://yeojz.github.io/otplib/docs/module-otplib-totp.html">totp.js</a></td>
<td>Wraps core functions into an instantiated TOTP class</td>
</tr>
<tr>
<td><a href="https://yeojz.github.io/otplib/docs/module-otplib-utils.html">utils.js</a></td>
<td>Helper utilities</td>
</tr>
</tbody>
</table>
<h3>Other Bundles</h3><table>
<thead>
<tr>
<th>file</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://yeojz.github.io/otplib/docs/module-otplib-browser.html">otplib-browser.js</a></td>
<td>Browser compatible package built with webpack</td>
</tr>
</tbody>
</table>
<p>For more information about the functions, check out the <a href="https://yeojz.github.io/otplib/docs">documentation</a>.</p>
<h2>Notes</h2><h3>Setting Custom Options</h3><p>All instantiated classes will have their options inherited from their respective options
generator. i.e. HOTP from <code>hotpOptions</code> and TOTP/Authenticator from <code>totpOptions</code>.</p>
<p>All OTP classes have an object setter and getter method to override these default options.</p>
<p>For example,</p>
<pre class="prettyprint source lang-js"><code>import otplib from 'otplib';

// setting
otplib.authenticator.options = {
  step: 30,
  window: 1
};

// getting
const opts = otplib.authenticator.options;

// reset to default
otplib.authenticator.resetOptions();</code></pre><h4>Available Options</h4><table>
<thead>
<tr>
<th>Option</th>
<th>Type</th>
<th>Defaults</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>algorithm</td>
<td>string</td>
<td>'sha1'</td>
<td>Algorithm used for HMAC</td>
</tr>
<tr>
<td>createHmacSecret</td>
<td>function</td>
<td>hotpSecret, totpSecret</td>
<td>Transforms the secret and applies any modifications like padding to it.</td>
</tr>
<tr>
<td>crypto</td>
<td>object</td>
<td>node crypto</td>
<td>Crypto module to use.</td>
</tr>
<tr>
<td>digits</td>
<td>integer</td>
<td>6</td>
<td>The length of the token</td>
</tr>
<tr>
<td>encoding</td>
<td>string</td>
<td>'ascii' ('hex' for authenticator)</td>
<td>The encoding of secret which is given to digest</td>
</tr>
<tr>
<td>epoch (totp, authenticator)</td>
<td>integer</td>
<td>null</td>
<td>Starting time since the UNIX epoch (seconds). <br /> epoch format is non-javascript. i.e. <code>Date.now() / 1000</code></td>
</tr>
<tr>
<td>step (totp, authenticator)</td>
<td>integer</td>
<td>30</td>
<td>Time step (seconds)</td>
</tr>
<tr>
<td>window (totp, authenticator)</td>
<td>integer or array</td>
<td>0</td>
<td>Tokens in the previous and future x-windows that should be considered valid. <br /> If integer, same value will be used for both. <br /> Alternatively, define array: <code>[previous, future]</code></td>
</tr>
</tbody>
</table>
<h3>Seed / secret length</h3><p>In <a href="http://tools.ietf.org/html/rfc6238">RFC 6238</a>, the secret / seed length for different algorithms is predefined:</p>
<pre class="prettyprint source lang-txt"><code>HMAC-SHA1 - 20 bytes
HMAC-SHA256 - 32 bytes
HMAC-SHA512 - 64 bytes</code></pre><p>As such, the length of the secret is padded and sliced according to the expected
length for respective algorithms.</p>
<h3>Google Authenticator</h3><h4>Difference between Authenticator and TOTP</h4><p>The default encoding option has been set to <code>hex</code> (Authenticator) instead of <code>ascii</code> (TOTP).</p>
<h4>Base32 Keys and RFC3548</h4><p>Google Authenticator requires keys to be base32 encoded.
It also requires the base32 encoder to be <a href="http://tools.ietf.org/html/rfc3548">RFC 3548</a> compliant.</p>
<p>OTP calculation will still work should you want to use
other base32 encoding methods (like Crockford's Base 32)
but it will NOT be compatible with Google Authenticator.</p>
<pre class="prettyprint source lang-js"><code>import authenticator from 'otplib/authenticator';

const secret = authenticator.generateSecret(); // base 32 encoded hex secret key
const token = authenticator.generate(secret);</code></pre><h4>Displaying a QR code</h4><p>You may want to generate and display a QR Code so that users can scan
instead of manually entering the secret. Google Authenticator and similar apps
take in a QR code that holds a URL with the protocol <code>otpauth://</code>,
which you get from <code>otplib.authenticator.keyuri</code>.</p>
<p>While this library provides the &quot;otpauth&quot; uri, you'll need a library to generate the QR Code image.</p>
<p>An example is shown below:</p>
<pre class="prettyprint source lang-js"><code>// npm install qrcode
import qrcode from 'qrcode';
import otplib from 'otplib';

const otpauth = otplib.authenticator.keyuri('user', 'service', secret);

qrcode.toDataURL(otpauth, (err, imageUrl) => {
  if (err) {
    console.log('Error with QR');
    return;
  }
  console.log(imageUrl);
});</code></pre><h3>Getting Time Remaining / Time Used</h3><p>Helper methods for getting the remaining time and used time within a validity period
of a <code>totp</code> or <code>authenticator</code> token were introduced in <code>v10.0.0</code>.</p>
<pre class="prettyprint source lang-js"><code>authenticator.timeUsed(); // or totp.timeUsed();
authenticator.timeRemaining(); // or totp.timeRemaining();

// The start of a new token would be when:
// - timeUsed() === 0
// - timeRemaining() === step</code></pre><h3>Exploring with local-repl</h3><p>If you'll like to explore the library with <code>local-repl</code> you can do so as well.</p>
<pre class="prettyprint source lang-bash"><code>$ npm install
$ npm run build

$ npx local-repl
# You should see something like:
# Node v8.9.4, local-repl 4.0.0
# otplib 10.0.0
# Context: otplib
# [otplib] >

$ [otplib] > secret = 'KVKFKRCPNZQUYMLXOVYDSQKJKZDTSRLD'
$ [otplib] > otplib.authenticator.generate(secret)</code></pre><h2>Contributing</h2><p>Check out: <a href="https://github.com/yeojz/otplib/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a></p>
<p><a href="https://ko-fi.com/geraldyeo"><img src="https://img.shields.io/badge/%E2%98%95%EF%B8%8F-buy%20me%20a%20coffee-orange.svg?longCache=true&amp;style=flat-square" alt="Support Project"></a>
<a href="https://github.com/yeojz/otplib/blob/master/CONTRIBUTING.md"><img src="https://img.shields.io/badge/PRs-welcome-brightgreen.svg?style=flat-square&amp;longCache=true" alt="PRs Welcome"></a></p>
<h2>License</h2><p><code>otplib</code> is <a href="./LICENSE">MIT licensed</a></p>
<p><img width="150" src="https://yeojz.github.io/otplib/otplib.png" /></p></article>
    </section>






</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sun Jun 17 2018 16:17:13 GMT+0800 (+08) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>